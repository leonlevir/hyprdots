#!/bin/bash

WALLPAPER_DIR="$HOME/Documents/wallpapers"
CURRENT_WALL=$(hyprctl hyprpaper listloaded | grep -oP '(?<=/)[^ ]+$')
NEW_WALL=$(find "$WALLPAPER_DIR" -type f ! -name "$CURRENT_WALL" | shuf -n 1)

# Aplica o novo wallpaper
hyprctl hyprpaper preload "$NEW_WALL"
hyprctl hyprpaper wallpaper "eDP-1,$NEW_WALL"  # Substitua "eDP-1" pelo nome do seu monitor

# Gera paleta de cores com wallust
wallust run "$NEW_WALL" --backend wal --no-apply

# Extrai a cor principal (ex: background ou accent) do arquivo gerado pelo wallust
BORDER_COLOR=$(grep "^color1" ~/.cache/wallust/colors | cut -d'=' -f2 | tr -d '"')

# Aplica a cor nas bordas do Hyprland
hyprctl keyword decoration:col.border_active "$BORDER_COLOR"
hyprctl keyword decoration:col.border_inactive "$BORDER_COLOR"


